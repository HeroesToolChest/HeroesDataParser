jobs:
- job: Linux
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
  - template: azure-pipelines.template.yml
#  - task: PublishTestResults@2
#    inputs:
#      testResultsFormat: 'xUnit'
#      testResultsFiles: '**/TEST-*.xml'
- job: macOS
  pool:
    vmImage: 'macOS-10.13'
  steps:
  - template: azure-pipelines.template.yml
#  - task: PublishTestResults@2
#    inputs:
#      testResultsFormat: 'xUnit'
#      testResultsFiles: '**/TEST-*.xml'
- job: Windows
  pool:
    vmImage: 'vs2017-win2016'
  steps:
  - template: azure-pipelines.template.yml
  - script: |
      dotnet publish -c release --no-build -o .\bin\publish\any\   
      dotnet pack .\HeroesData\HeroesData.csproj -c release --no-build -o .\bin\nupkg\any\
      dotnet publish -c release --self-contained -r win-x86 -o .\bin\publish\win-x86\
      dotnet publish -c release --self-contained -r win-x64 -o .\bin\publish\win-x64\
      dotnet publish -c release --self-contained -r osx-x64 -o .\bin\publish\osx-x64\
      dotnet publish -c release --self-contained -r linux-x64 -o .\bin\publish\linux-x64\
#  - task: PublishTestResults@2
#    inputs:
#      testResultsFormat: 'xUnit'
#      testResultsFiles: '**/TEST-*.xml'
